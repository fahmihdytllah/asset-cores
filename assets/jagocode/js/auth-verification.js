let twoStepsForm=document.querySelector("#twoStepsForm"),formVerify=$("#twoStepsForm"),countdownElement=$("#countdown"),btnGetCode=$("#getCode");function startCountdown(e,o,t){o.show();let r=e,n=setInterval(()=>{r--,o.text(r),r<=0&&(clearInterval(n),"function"==typeof t)&&t()},1e3)}document.addEventListener("DOMContentLoaded",function(e){for(let o of document.querySelector(".numeral-mask-wrapper").children)o.onkeyup=function(e){/^\d$/.test(e.key)?o.nextElementSibling&&this.value.length===parseInt(this.attributes.maxlength.value)&&o.nextElementSibling.focus():"Backspace"===e.key&&o.previousElementSibling&&o.previousElementSibling.focus()},o.onkeypress=function(e){"-"===e.key&&e.preventDefault()};if(twoStepsForm){FormValidation.formValidation(twoStepsForm,{fields:{otp:{validators:{notEmpty:{message:"Please enter otp"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap5:new FormValidation.plugins.Bootstrap5({eleValidClass:"",rowSelector:".mb-6"}),submitButton:new FormValidation.plugins.SubmitButton,autoFocus:new FormValidation.plugins.AutoFocus}}).on("core.form.valid",function(){formVerify.block({message:elementLoader,css:{backgroundColor:"transparent",border:"0"},overlayCSS:{backgroundColor:"#fff",opacity:.8}}),"object"==typeof grecaptcha&&loadCaptcha(),$.ajax({type:"POST",url:"?",data:$(formVerify).serialize(),headers:{"X-Jago-Captcha":jagoCaptcha},success:function(e){formVerify.unblock(),toastr.success(e.msg,"Good Job!"),setTimeout(()=>{window.location.href=e?.redirectTo?e.redirectTo:redirectTo},2e3)},error:function(e){formVerify.unblock();e=e.responseJSON?.msg;toastr.error(e,"Opss!")}})});let e=twoStepsForm.querySelectorAll(".numeral-mask"),o=function(){let o=!0,t="";e.forEach(e=>{""===e.value&&(o=!1,twoStepsForm.querySelector('[name="code"]').value=""),t+=e.value}),o&&(twoStepsForm.querySelector('[name="code"]').value=t)};e.forEach(e=>{e.addEventListener("keyup",o)})}}),btnGetCode&&btnGetCode.click(function(){formVerify.block({message:elementLoader,css:{backgroundColor:"transparent",border:"0"},overlayCSS:{backgroundColor:"#fff",opacity:.8}}),$.ajax({url:"?type=resend",type:"GET",success:function(e){formVerify.unblock(),btnGetCode.hide(),startCountdown(60,countdownElement,()=>{btnGetCode.show(),countdownElement.hide()})},error:function(e){formVerify.unblock();e=e.responseJSON.msg;Swal.fire({title:"Upss!",text:e||"There is an error!",icon:"error",customClass:{confirmButton:"btn btn-primary waves-effect waves-light"},buttonsStyling:!1})}})});