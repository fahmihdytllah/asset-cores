function toggleLoader(e,t){e.find("[data-element-loader]").each(function(){let o=$(this),r=o.data("element-loader"),s=e.find(r);t?(o.loaderShow(),s.hide()):(o.loaderHide(),s.show())})}$.fn.extend({loaderHide:function(){this.removeClass("d-flex").addClass("d-none")},loaderShow:function(){this.removeClass("d-none").addClass("d-flex")}}),$(document).ready(function(){let e=$(".btn-login-adsense"),t,o,r,s,a;isDarkStyle?(t=config.colors_dark.cardColor,s=config.colors_dark.textMuted,r=config.colors_dark.bodyColor,o=config.colors_dark.headingColor,a=config.colors_dark.borderColor):(t=config.colors.cardColor,s=config.colors.textMuted,r=config.colors.bodyColor,o=config.colors.headingColor,a=config.colors.borderColor);let n={up:{class:"success",icon:"+"},down:{class:"danger",icon:""},"-":{class:"secondary",icon:"-"}};function l(){let e=$("#weeklySummaryChart"),o=$("#weeklySummaryLoader"),r=$("#weeklyOverview"),l=$("#weeklyOverviewLoader"),i=document.querySelector("#weeklySummaryChart");o.loaderShow(),l.loaderShow(),e.hide(),r.hide(),$.get("/api/earnings-weekly",function({status:c,data:d}){if(o.loaderHide(),l.loaderHide(),e.show(),r.show(),e.html(""),!c){e.html('<span class="text-muted">Please log in to your Adsense account first.<span>'),r.html('<span class="text-muted">Please log in to your Adsense account first.<span>');return}$(".earning-this-week").html(h(d.weekly.earnings)),$(".progress-weekly").css({width:d.weekly.progress}),$(".earning-average").html(h(d.daily.average)),$(".progress-daily").css({width:d.daily.progress}),$(".weekly-growth").html('<span class="text-'+n[d.weekly.growth.status].class+'"><i class="ti ti-chevron-'+d.weekly.growth.status+' me-1"></i>'+d.weekly.growth.value+"</span>");let u={chart:{height:300,type:"area",toolbar:!1,dropShadow:{enabled:!0,top:18,left:2,blur:3,color:config.colors.primary,opacity:.15}},markers:{size:6,colors:"transparent",strokeColors:"transparent",strokeWidth:4,discrete:[{fillColor:t,seriesIndex:0,dataPointIndex:d.weekly.largestIndex,strokeColor:config.colors.primary,strokeWidth:4,size:6,radius:2},],hover:{size:7}},series:[{name:"Earnings",data:d.weekly.series},],dataLabels:{enabled:!1},stroke:{curve:"smooth",lineCap:"round"},colors:[config.colors.primary],fill:{type:"gradient",gradient:{shade:isDarkStyle,shadeIntensity:.8,opacityFrom:.7,opacityTo:.25,stops:[0,95,100]}},tooltip:{y:{formatter:function(e){return h(e)}}},grid:{show:!0,borderColor:a,padding:{top:0,bottom:0,left:5,right:0}},xaxis:{categories:d.weekly.labels,labels:{offsetX:0,formatter:function(e){return function e(t){let o=new Date(t);return o.toLocaleDateString("id-ID",{month:"short",day:"numeric"})}(e)},style:{colors:s,fontSize:"13px"}},axisBorder:{show:!1},axisTicks:{show:!1},lines:{show:!1}},yaxis:{labels:{offsetX:-7,formatter:function(e){return f(e)},style:{fontSize:"13px",colors:s,fontFamily:"Public Sans"}},min:0,tickAmount:5}};if(null!==i){let g=new ApexCharts(i,u);g.render()}})}function i(){let e=$("#earningPlatformChart"),t=$("#earningPlatformLoader");t.loaderShow(),e.hide(),$.get("/api/earnings-by-platform",function({status:r,data:a}){if(t.loaderHide(),e.show(),e.html(""),!r){e.html('<span class="text-muted">Please log in to your Adsense account first.<span>');return}let n=document.querySelector("#earningPlatformChart"),l=a.series.reduce((e,t)=>e+t,0),i={chart:{height:350,parentHeightOffset:0,type:"donut"},labels:a.labels,series:a.series,colors:config.colors.palette,stroke:{width:0},dataLabels:{enabled:!1,formatter:function(e,t){return(e/l*100).toFixed(1)+"%"}},legend:{show:!0,position:"bottom",offsetY:10,markers:{width:8,height:8,offsetX:-3},itemMargin:{horizontal:15,vertical:5},fontSize:"13px",fontFamily:"Public Sans",fontWeight:400,labels:{colors:o,useSeriesColors:!1}},tooltip:{y:{formatter:function(e){return h(e)}}},grid:{padding:{top:15}},plotOptions:{pie:{donut:{size:"75%",labels:{show:!0,value:{fontSize:"26px",fontFamily:"Public Sans",color:o,fontWeight:500,offsetY:-30,formatter:function(e){return(e/l*100).toFixed(0)+"%"}},name:{offsetY:20,fontFamily:"Public Sans"},total:{show:!0,fontSize:"0.9rem",label:a.labels[0],color:s,formatter:function(e){return(a.series[0]/l*100).toFixed(0)+"%"}}}}}},responsive:[{breakpoint:1025,options:{chart:{height:380}}},{breakpoint:420,options:{chart:{height:300}}},]};if(a.labels,a.series,config.colors.palette,a.labels[0],null!==n){let c=new ApexCharts(n,i);c.render()}})}function c(){let e=$("#earningYearlyChart"),t=$("#earningYearlyLoader"),o=document.querySelector("#earningYearlyChart");t.loaderShow(),e.hide(),e.html(""),$.get("/api/earnings-yearly",function({status:l,data:i}){if(t.loaderHide(),e.show(),!l){e.html('<span class="text-muted">Please log in to your Adsense account first.<span>');return}$(".month-earnings").html(h(i.monthly.earnings)),$(".month-earnings-growth").html(i.monthly.growth.value),$(".month-earnings-growth").addClass("text-"+n[i.monthly.growth.status].class);let c=function e(t,o,n){let l=config.colors_label.primary,i=config.colors.primary;var c=[];for(let d=0;d<t.length;d++)d===n?c.push(i):c.push(l);let h={chart:{height:258,parentHeightOffset:0,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{columnWidth:"32%",startingShape:"rounded",borderRadius:7,distributed:!0,dataLabels:{position:"top"}}},grid:{show:!1,padding:{top:0,bottom:0,left:-10,right:-10}},colors:c,dataLabels:{enabled:!0,formatter:function(e){return f(e)},offsetY:-25,style:{fontSize:"15px",colors:[r],fontWeight:"600",fontFamily:"Public Sans"}},series:[{data:t},],legend:{show:!1},tooltip:{enabled:!1},xaxis:{categories:o,axisBorder:{show:!0,color:a},axisTicks:{show:!1},labels:{formatter:function(e){return function e(t){let o=new Date(`${t}-01`),r=new Intl.DateTimeFormat("en-US",{month:"short"}).format(o);return r}(e)},style:{colors:s,fontSize:"13px",fontFamily:"Public Sans"}}},yaxis:{labels:{offsetX:-15,formatter:function(e){return f(parseInt(e))},style:{fontSize:"13px",colors:s,fontFamily:"Public Sans"},min:0,max:6e4,tickAmount:6}},responsive:[{breakpoint:1441,options:{plotOptions:{bar:{columnWidth:"41%"}}}},{breakpoint:590,options:{plotOptions:{bar:{columnWidth:"61%",borderRadius:5}},yaxis:{labels:{show:!1}},grid:{padding:{right:0,left:-20}},dataLabels:{style:{fontSize:"12px",fontWeight:"400"}}}},]};return h}(i.yearly.series,i.yearly.labels,i.yearly.largestIndex);if(null!==o){let d=new ApexCharts(o,c);d.render()}})}function d(){let e=$("#earningCountryChart"),t=$("#earningCountryLoader");t.loaderShow(),e.hide(),$.get("/api/earnings-by-country",function({status:s,data:a}){if(t.loaderHide(),e.show(),e.html(""),!s){e.html('<span class="text-muted">Please log in to your Adsense account first.<span>');return}let n=document.querySelector("#earningCountryChart"),l=a.series.reduce((e,t)=>e+t,0),i={chart:{height:250,parentHeightOffset:0,type:"donut"},labels:a.labels,series:a.series,colors:config.colors.palette,stroke:{width:0},dataLabels:{enabled:!1,formatter:function(e,t){return(e/l*100).toFixed(1)+"%"}},legend:{show:!0,position:"right",offsetX:-10,offsetY:0,markers:{width:8,height:8,offsetX:-3},itemMargin:{horizontal:10,vertical:5},fontSize:"13px",fontFamily:"Public Sans",fontWeight:400,labels:{colors:o,useSeriesColors:!1}},tooltip:{y:{formatter:function(e){return h(e)}}},grid:{padding:{top:10,bottom:0,left:0,right:0}},plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,value:{fontSize:"20px",fontFamily:"Public Sans",color:o,fontWeight:500,offsetY:-20,formatter:function(e){return(e/l*100).toFixed(0)+"%"}},name:{offsetY:30,fontFamily:"Public Sans"},total:{show:!0,fontSize:"14px",fontFamily:"Public Sans",color:r,label:a.labels[0],formatter:function(e){return(a.series[0]/l*100).toFixed(0)+"%"}}}}}},responsive:[{breakpoint:768,options:{chart:{height:240},legend:{position:"bottom",offsetY:5}}},{breakpoint:480,options:{chart:{height:220},legend:{position:"bottom",offsetY:5,itemMargin:{horizontal:8,vertical:3}}}},]};if(null!==n){let c=new ApexCharts(n,i);c.render()}})}function h(e){let t=navigator.language||"id-ID",o=new Intl.NumberFormat(t,{style:"currency",currency:currencyCode});return o.format(e)}function f(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(0)+"K":e.toString()}(function e(){let t=$("#statistics"),o=$("#statisticsLoader");t.hide(),o.loaderShow(),$.get("/api/user-statistics",function({data:e}){t.show(),o.loaderHide(),$(".total-visitors").html(f(e.totalHits)),$(".avg-ads").html(f(e.avgAds)),$(".total-clicks").html(f(e.totalClicks)),$(".avg-time").html(e.avgHitsTime),$(".total-workers").html(f(e.totalWorkers)),$(".total-keys").html(f(e.totalKeys)),$(".avg-cpu").html(e.avgCpu),$(".total-errors").html(f(e.totalErrors))})})(),function e(){let t=$(".card-earnings");toggleLoader(t,!0),$.get("/api/earning-today",function({data:e}){toggleLoader(t,!1),$(".today-earnings").html(h(e.earnings.value)),$(".today-earnings-growth").html(e.earnings.growth),$(".today-earnings-growth").addClass("text-"+n[e.earnings.status].class),$(".today-clicks").html(e.clicks.value),$(".today-clicks-growth").html(e.clicks.growth),$(".today-clicks-growth").addClass("text-"+n[e.clicks.status].class),$(".today-rpm").html(h(e.rpm.value)),$(".today-rpm-growth").html(e.rpm.growth),$(".today-rpm-growth").addClass("text-"+n[e.rpm.status].class)})}(),l(),$(".btn-refresh-weekly").click(function(){l()}),c(),$(".btn-refresh-yearly").click(function(){c()}),i(),$(".btn-refresh-platform").click(function(){i()}),d(),$(".btn-refresh-country").click(function(){d()}),e&&e.click(function(){thirdPartyAccess("google-adsense",{onSuccess(e){Swal.fire({title:"Good News!",text:e.msg,icon:"success",customClass:{confirmButton:"btn btn-primary waves-effect waves-light"}}).then(()=>location.reload())},onError(e){Swal.fire({title:"Bad News!",text:e.msg,icon:"error",customClass:{confirmButton:"btn btn-primary waves-effect waves-light"}})}})})});